require 'net/http'
require 'rubygems'
require 'las_reader'

# Homepage (Root path)
get '/' do
  erb :index
end

get '/display' do
  @url = params[:url]
  uri = URI(@url)
  @filename = (/[^\/]*$/.match(@url))
  File.open("#{@filename}", "w") {|f| f.write(Net::HTTP.get(uri)) }
  @worklas = CWLSLas.new("#{@filename}")
  @curves = @worklas.curve_names
  erb :display
end
